<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    <title>Caucasus oral histories - catalogue demo</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
      .summary { 
        display: -webkit-box; 
        -webkit-line-clamp: 3; 
        -webkit-box-orient: vertical; 
        overflow: hidden; 
      }
      .archive-card {
        display: flex;
        flex-direction: column;
      }
    </style>
  </head>
  <body class="bg-neutral-50 text-neutral-900">
    <div id="root"></div>

    <script crossorigin src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>

    <script type="text/babel">
      const { useMemo, useState } = React;

      const ITEMS = [
        {
          id: "AA-2010-001",
          title: "Life after return to Aghdam",
          interviewee: "Leyla M.",
          summary: "A testimony about rebuilding livelihoods after displacement, covering housing, schooling and access to services.",
          themes: ["Displacement", "Livelihoods", "Memory"],
          tags: ["IDP", "return", "housing", "education", "reconstruction"],
          year: 2010,
          period: "2000s",
          location: "Aghdam district, Azerbaijan",
          country: "Azerbaijan",
          language: ["Azerbaijani"],
          sensitivity: "Restricted",
          warnings: ["Trauma"],
          owner: "Partner B",
          transcript: "Partial",
          access: "Non-commercial use with citation",
          duration: "00:47",
        },
        {
          id: "AA-1996-014",
          title: "Negotiation mechanics in the late 1990s",
          interviewee: "Dr. Armen K.",
          summary: "An interview with a former track-two participant describing informal meeting formats and confidence-building ideas discussed at the time.",
          themes: ["Negotiations", "Process", "Track-two"],
          tags: ["diplomacy", "conflict resolution", "track-two", "CBMs", "1990s peace process"],
          year: 1996,
          period: "1990s",
          location: "Yerevan, Armenia",
          country: "Armenia",
          language: ["Armenian", "Russian"],
          sensitivity: "Open",
          warnings: ["None"],
          owner: "Partner A",
          transcript: "None",
          access: "Contact owner for conditions",
          duration: "01:12",
        },
        {
          id: "AA-2021-072",
          title: "Living with loss after 2020",
          interviewee: "Anahit S.",
          summary: "A personal account of grief, community support and navigating state services in the immediate post-war period.",
          themes: ["Post-war", "Social services", "Mental health"],
          tags: ["2020 war", "grief", "psychological support", "community resilience", "displacement"],
          year: 2021,
          period: "2020s",
          location: "Syunik region, Armenia",
          country: "Armenia",
          language: ["Armenian", "English"],
          sensitivity: "High risk",
          warnings: ["Trauma", "Violence"],
          owner: "Partner C",
          transcript: "Redacted excerpt",
          access: "Embargoed excerpts only",
          duration: "00:34",
        },
        {
          id: "AA-2014-029",
          title: "Youth and cross-border dialogue",
          interviewee: "Nino T. & Orkhan A.",
          summary: "A facilitated discussion among students reflecting on stereotypes, media narratives and safe formats for exchange.",
          themes: ["Youth", "Dialogue", "Media"],
          tags: ["youth engagement", "stereotypes", "media literacy", "cross-border", "peacebuilding"],
          year: 2014,
          period: "2010s",
          location: "Tbilisi, Georgia",
          country: "Cross-border",
          language: ["English", "Russian"],
          sensitivity: "Restricted",
          warnings: ["None"],
          owner: "Partner D",
          transcript: "Full on request",
          access: "Non-commercial with attribution",
          duration: "00:58",
        },
        {
          id: "AA-2005-011",
          title: "Women and livelihood strategies",
          interviewee: "Maro V.",
          summary: "Small enterprise, care responsibilities and informal support networks in rural settings.",
          themes: ["Women, peace and security", "Livelihoods"],
          tags: ["women's economic empowerment", "rural livelihoods", "informal economy", "care work", "WPS"],
          year: 2005,
          period: "2000s",
          location: "Shirak region, Armenia",
          country: "Armenia",
          language: ["Armenian"],
          sensitivity: "Open",
          warnings: ["None"],
          owner: "Partner A",
          transcript: "Partial",
          access: "CC BY for metadata only",
          duration: "00:39",
        },
        {
          id: "AA-2023-101",
          title: "Return and reconstruction planning",
          interviewee: "Rashad M.",
          summary: "A municipal official outlines service restoration plans, constraints and civil society input after displacement.",
          themes: ["Governance", "Return", "Infrastructure"],
          tags: ["municipal governance", "reconstruction", "civil society", "service delivery", "post-conflict planning"],
          year: 2023,
          period: "2020s",
          location: "Fuzuli district, Azerbaijan",
          country: "Azerbaijan",
          language: ["Azerbaijani", "English"],
          sensitivity: "Restricted",
          warnings: ["None"],
          owner: "Partner B",
          transcript: "None",
          access: "Contact owner",
          duration: "00:42",
        },
        {
          id: "AA-2012-055",
          title: "Media narratives and bias awareness",
          interviewee: "Farid J.",
          summary: "A media educator discusses classroom techniques for source evaluation and bias recognition.",
          themes: ["Media", "Education"],
          tags: ["media literacy", "critical thinking", "bias", "education", "information warfare"],
          year: 2012,
          period: "2010s",
          location: "Baku, Azerbaijan",
          country: "Azerbaijan",
          language: ["Azerbaijani", "Russian"],
          sensitivity: "Open",
          warnings: ["None"],
          owner: "Partner E",
          transcript: "Full on request",
          access: "Non-commercial with attribution",
          duration: "00:51",
        },
        {
          id: "AA-1993-003",
          title: "Displacement routes in the early 1990s",
          interviewee: "Samvel H.",
          summary: "An oral history of evacuation, temporary shelter and family separation in the first phase of the conflict.",
          themes: ["Displacement", "Humanitarian"],
          tags: ["forced displacement", "1990s conflict", "refugees", "family separation", "humanitarian crisis"],
          year: 1993,
          period: "1990s",
          location: "Various",
          country: "Cross-border",
          language: ["Armenian", "Azerbaijani"],
          sensitivity: "Restricted",
          warnings: ["Trauma"],
          owner: "Partner F",
          transcript: "None",
          access: "Case-by-case",
          duration: "01:05",
        },
      ];

      const THEMES = ["Displacement", "Livelihoods", "Memory", "Negotiations", "Process", "Track-two", "Post-war", "Social services", "Mental health", "Youth", "Dialogue", "Media", "Women, peace and security", "Governance", "Return", "Infrastructure", "Education", "Humanitarian"];
      const PERIODS = ["1990s", "2000s", "2010s", "2020s"];

      function App() {
        const [query, setQuery] = useState("");
        const [theme, setTheme] = useState("");
        const [period, setPeriod] = useState("");
        const [language, setLanguage] = useState("");
        const [country, setCountry] = useState("");
        const [includeHighRisk, setIncludeHighRisk] = useState(false);
        const [sort, setSort] = useState("Newest");
        const [selected, setSelected] = useState(null);
        const [showRequest, setShowRequest] = useState(false);
        const [requestSubmitted, setRequestSubmitted] = useState(false);

        const languages = useMemo(() => {
          const set = new Set();
          ITEMS.forEach((i) => i.language.forEach((l) => set.add(l)));
          return Array.from(set).sort();
        }, []);

        const countries = ["Armenia", "Azerbaijan", "Cross-border"];

        const filtered = useMemo(() => {
          let list = ITEMS.filter((i) => {
            const text = `${i.title} ${i.summary} ${i.interviewee} ${i.tags.join(" ")}`.toLowerCase();
            const q = query.trim().toLowerCase();
            if (q && !text.includes(q)) return false;
            if (theme && !i.themes.includes(theme)) return false;
            if (period && i.period !== period) return false;
            if (language && !i.language.includes(language)) return false;
            if (country && i.country !== country) return false;
            if (!includeHighRisk && i.sensitivity === "High risk") return false;
            return true;
          });
          list.sort((a, b) => (sort === "Newest" ? b.year - a.year : a.year - b.year));
          return list;
        }, [query, theme, period, language, country, includeHighRisk, sort]);

        return (
          <div className="min-h-screen bg-neutral-50 text-neutral-900">
            <TopBanner />
            <Header />
            <div className="mx-auto max-w-7xl px-4 sm:px-6 lg:px-8 pb-8 pt-6">
              <div className="grid grid-cols-1 lg:grid-cols-4 gap-6">
                <aside className="lg:col-span-1 bg-white rounded-lg shadow p-4 h-fit lg:sticky lg:top-20">
                  <h2 className="text-base font-semibold mb-4">Refine results</h2>
                  
                  <div className="space-y-4">
                    <div>
                      <label className="block text-sm font-medium mb-2">Search catalogue</label>
                      <input type="text" placeholder="Type a keyword..." value={query} onChange={(e) => setQuery(e.target.value)} className="w-full rounded border border-neutral-300 px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-neutral-800" />
                    </div>
                    <Select label="Theme" value={theme} onChange={setTheme} options={["", ...THEMES]} />
                    <Select label="Period" value={period} onChange={setPeriod} options={["", ...PERIODS]} />
                    <Select label="Language" value={language} onChange={setLanguage} options={["", ...languages]} />
                    <Select label="Country" value={country} onChange={setCountry} options={["", ...countries]} />
                    <div className="flex items-center gap-2">
                      <input id="high-risk" type="checkbox" checked={includeHighRisk} onChange={(e) => setIncludeHighRisk(e.target.checked)} className="h-4 w-4" />
                      <label htmlFor="high-risk" className="text-sm">Include high risk records</label>
                    </div>
                    <div>
                      <label className="block text-sm font-medium mb-2">Sort by</label>
                      <select value={sort} onChange={(e) => setSort(e.target.value)} className="w-full rounded border border-neutral-300 px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-neutral-800">
                        <option value="Newest">Newest</option>
                        <option value="Oldest">Oldest</option>
                      </select>
                    </div>
                    <button onClick={() => { setQuery(""); setTheme(""); setPeriod(""); setLanguage(""); setCountry(""); setIncludeHighRisk(false); }} className="w-full text-center text-sm text-neutral-600 hover:text-neutral-900 py-2">Clear all</button>
                  </div>
                </aside>

                <main className="lg:col-span-3">
                  <div className="mb-6">
                    <h1 className="text-2xl font-bold mb-1">Browse catalogue</h1>
                    <p className="text-sm text-neutral-600">{filtered.length} results shown</p>
                  </div>

                  <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4">
                    {filtered.map((item) => (
                      <article key={item.id} className="archive-card bg-white rounded-lg border border-neutral-200 hover:shadow-lg transition cursor-pointer overflow-hidden" onClick={() => setSelected(item)}>
                        <div className="p-4 pb-3 border-b border-neutral-100">
                          <div className="flex items-center justify-between mb-3">
                            <span className="text-xs px-2 py-1 rounded bg-neutral-100 border border-neutral-200">{item.period}</span>
                            <SensitivityBadge level={item.sensitivity} />
                          </div>
                          <h3 className="text-base font-semibold leading-tight mb-1">{item.title}</h3>
                          <p className="text-xs text-neutral-600 mb-2"><strong>Interviewee:</strong> {item.interviewee}</p>
                          <p className="text-sm summary text-neutral-700">{item.summary}</p>
                        </div>
                        <div className="px-4 pt-3 pb-2 border-b border-neutral-100">
                          <div className="flex flex-wrap gap-1">
                            {item.themes.map((t) => (
                              <span key={t} className="text-xs px-2 py-0.5 rounded bg-neutral-50 border border-neutral-200">{t}</span>
                            ))}
                          </div>
                        </div>
                        <div className="p-4 space-y-2 text-xs">
                          <div className="grid grid-cols-2 gap-x-4 gap-y-2">
                            <div><div className="text-neutral-500">Year</div><div className="font-medium">{item.year}</div></div>
                            <div><div className="text-neutral-500">Language</div><div className="font-medium">{item.language.join(", ")}</div></div>
                            <div><div className="text-neutral-500">Country</div><div className="font-medium">{item.country}</div></div>
                            <div><div className="text-neutral-500">Owner</div><div className="font-medium">{item.owner}</div></div>
                          </div>
                          <div className="pt-1"><span className="text-neutral-500">Content warnings:</span> <span className="font-medium">{item.warnings.join(", ")}</span></div>
                        </div>
                      </article>
                    ))}
                  </div>

                  {filtered.length === 0 && (
                    <div className="text-center py-12 text-neutral-500">No results found. Try adjusting your filters.</div>
                  )}
                </main>
              </div>
            </div>

            {selected && <DetailModal item={selected} onClose={() => { setSelected(null); setShowRequest(false); setRequestSubmitted(false); }} onRequest={() => setShowRequest(true)}>{showRequest && !requestSubmitted ? <RequestForm itemId={selected.id} onSubmit={() => { setRequestSubmitted(true); setShowRequest(false); }} onCancel={() => setShowRequest(false)} /> : requestSubmitted ? <RequestSubmitted /> : null}</DetailModal>}
            <Footer />
          </div>
        );
      }

      function TopBanner() {
        return <div className="bg-amber-50 border-b border-amber-200"><div className="mx-auto max-w-7xl px-4 sm:px-6 lg:px-8 py-2 text-sm text-amber-900">Demo mock for illustration only - no real personal data or video materials</div></div>;
      }

      function Header() {
        return <header className="bg-white/80 backdrop-blur sticky top-0 z-10 border-b"><div className="mx-auto max-w-7xl px-4 sm:px-6 lg:px-8 py-4 flex items-center justify-between"><div className="flex items-center gap-3"><div className="h-9 w-9 rounded-xl bg-neutral-900 text-white grid place-items-center font-bold text-sm">CA</div><div><p className="text-lg sm:text-xl font-bold leading-tight">Caucasus oral histories</p><p className="text-xs text-neutral-600">Open catalogue of interviews - metadata only</p></div></div><nav className="hidden md:flex items-center gap-6 text-sm text-neutral-700"><a className="hover:text-neutral-900" href="#">Browse</a><a className="hover:text-neutral-900" href="#">Collections</a><a className="hover:text-neutral-900" href="#">About</a><a className="hover:text-neutral-900" href="#">Policy</a></nav></div></header>;
      }

      function Footer() {
        return <footer className="mt-12 border-t bg-white"><div className="mx-auto max-w-7xl px-4 sm:px-6 lg:px-8 py-8 grid md:grid-cols-3 gap-6 text-sm text-neutral-700"><div><p className="font-semibold mb-2">About this project</p><p>A discovery tool for researchers, journalists and students interested in Armenia-Azerbaijan conflict histories.</p></div><div><p className="font-semibold mb-2">Policies</p><ul className="space-y-1"><li><a href="#" className="hover:underline">Privacy notice</a></li><li><a href="#" className="hover:underline">Terms of use</a></li><li><a href="#" className="hover:underline">Takedown policy</a></li></ul></div><div><p className="font-semibold mb-2">Contact</p><p>For general queries use the contact form on the About page. For access to a specific item please use the request access button on that item page.</p></div></div></footer>;
      }

      function SensitivityBadge({ level }) {
        const classes = level === "Open" ? "bg-emerald-50 border-emerald-200 text-emerald-800" : level === "Restricted" ? "bg-amber-50 border-amber-200 text-amber-800" : "bg-rose-50 border-rose-200 text-rose-800";
        return <span className={"text-xs px-2 py-0.5 rounded border " + classes}>{level}</span>;
      }

      function Select({ label, value, onChange, options }) {
        return <div><label className="block text-sm font-medium mb-2">{label}</label><select value={value} onChange={(e) => onChange(e.target.value)} className="w-full rounded border border-neutral-300 px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-neutral-800">{options.map((opt, idx) => <option key={idx} value={opt}>{opt === "" ? "Any" : opt}</option>)}</select></div>;
      }

      function DetailModal({ item, onClose, onRequest, children }) {
        return <div className="fixed inset-0 z-20"><div className="absolute inset-0 bg-black/40" onClick={onClose}></div><div className="absolute right-0 top-0 h-full w-full sm:w-[540px] bg-white shadow-xl overflow-y-auto"><div className="sticky top-0 bg-white border-b px-6 py-4 flex items-start justify-between gap-4"><div className="flex-1"><div className="flex items-center gap-2 mb-2"><span className="text-xs px-2 py-1 rounded bg-neutral-100 border">{item.period}</span><SensitivityBadge level={item.sensitivity} /></div><h2 className="text-xl font-semibold leading-tight">{item.title}</h2></div><button onClick={onClose} className="rounded border px-3 py-2 text-sm hover:bg-neutral-50">Close</button></div><div className="p-6 space-y-6"><div><p className="text-sm text-neutral-600 mb-1"><strong>Interviewee:</strong> {item.interviewee}</p><p className="text-sm text-neutral-600">{item.location} - {item.year}</p></div><div><h3 className="text-sm font-semibold mb-2">Summary</h3><p className="text-sm text-neutral-700">{item.summary}</p></div><div><h3 className="text-sm font-semibold mb-2">Themes</h3><div className="flex flex-wrap gap-1">{item.themes.map((t) => <span key={t} className="text-xs px-2 py-1 rounded bg-neutral-50 border">{t}</span>)}</div></div><div><h3 className="text-sm font-semibold mb-2">Tags</h3><div className="flex flex-wrap gap-1">{item.tags.map((tag) => <span key={tag} className="text-xs px-2 py-1 rounded bg-neutral-100 text-neutral-700">{tag}</span>)}</div></div><div className="grid grid-cols-2 gap-4 text-sm"><div><div className="text-neutral-500 mb-1">Language</div><div className="font-medium">{item.language.join(", ")}</div></div><div><div className="text-neutral-500 mb-1">Owner</div><div className="font-medium">{item.owner}</div></div><div><div className="text-neutral-500 mb-1">Transcript</div><div className="font-medium">{item.transcript}</div></div><div><div className="text-neutral-500 mb-1">Duration</div><div className="font-medium">{item.duration}</div></div><div className="col-span-2"><div className="text-neutral-500 mb-1">Access</div><div className="font-medium">{item.access}</div></div></div><div className="text-sm"><strong>Content warnings:</strong> {item.warnings.join(", ")}</div><div className="rounded-lg bg-neutral-50 border p-4 text-sm">This catalogue holds metadata only. To view or use the material please submit a request to the rights holder. Approval is at the discretion of the owner.</div><div className="flex gap-2"><button onClick={onRequest} className="rounded px-4 py-2 bg-neutral-900 text-white hover:bg-neutral-800 text-sm">Request access</button><button className="rounded px-4 py-2 border hover:bg-neutral-50 text-sm">Copy citation</button></div>{children}</div></div></div>;
      }

      function RequestForm({ itemId, onCancel, onSubmit }) {
        return <form className="mt-6 pt-6 border-t" onSubmit={(e) => { e.preventDefault(); onSubmit(); }}><h3 className="text-lg font-semibold mb-2">Request access</h3><p className="text-sm text-neutral-600 mb-4">Item ID: {itemId}</p><div className="space-y-3"><LabeledInput id="name" label="Your name" required /><LabeledInput id="email" type="email" label="Email" required /><LabeledInput id="affil" label="Affiliation or independent" /><LabeledInput id="purpose" label="Intended use" placeholder="E.g. dissertation chapter on post-war livelihoods" /><LabeledInput id="deadline" type="date" label="Deadline (optional)" /><div className="flex items-start gap-2"><input id="consent" type="checkbox" required className="h-4 w-4 mt-0.5" /><label htmlFor="consent" className="text-sm">I acknowledge the content warnings and agree to respect the access conditions</label></div></div><div className="mt-4 flex gap-2"><button type="submit" className="rounded px-4 py-2 bg-neutral-900 text-white hover:bg-neutral-800 text-sm">Submit request</button><button type="button" onClick={onCancel} className="rounded px-4 py-2 border hover:bg-neutral-50 text-sm">Cancel</button></div></form>;
      }

      function LabeledInput({ id, label, type = "text", required = false, placeholder = "" }) {
        return <div><label className="block text-sm mb-1" htmlFor={id}>{label}{required ? " *" : ""}</label><input id={id} type={type} placeholder={placeholder} required={required} className="w-full rounded border border-neutral-300 px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-neutral-800" /></div>;
      }

      function RequestSubmitted() {
        return <div className="mt-6 pt-6 border-t rounded-lg bg-emerald-50 border-emerald-200 p-4 text-sm text-emerald-900">Your request has been noted in this demo. In production it would be routed to the rights holder and you would receive a confirmation email.</div>;
      }

      const root = ReactDOM.createRoot(document.getElementById("root"));
      root.render(<App />);
    </script>
  </body>
</html>
